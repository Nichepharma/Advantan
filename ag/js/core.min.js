(function(){var h,e,a,b,c,f,k;var i=function(d,m){return function(){return d.apply(m,arguments)}},l=Array.prototype.indexOf||function(n){for(var m=0,d=this.length;m<d;m++){if(this[m]===n){return m}}return -1},j=Object.prototype.hasOwnProperty,g=function(o,m){for(var d in m){if(j.call(m,d)){o[d]=m[d]}}function n(){this.constructor=o}n.prototype=m.prototype;o.prototype=new n;o.__super__=m.prototype;return o};k=document;window.presentationInit=k.createEvent("UIEvents");window.slideshowLoad=k.createEvent("UIEvents");window.slideshowUnload=k.createEvent("UIEvents");window.collectionLoad=k.createEvent("UIEvents");window.collectionUnload=k.createEvent("UIEvents");window.inlineSlideshowLoad=k.createEvent("UIEvents");window.inlineSlideshowUnload=k.createEvent("UIEvents");window.contentLoad=k.createEvent("UIEvents");window.contentUnload=k.createEvent("UIEvents");window.slideEnter=k.createEvent("UIEvents");window.slideExit=k.createEvent("UIEvents");window.sectionEnter=k.createEvent("UIEvents");window.sectionExit=k.createEvent("UIEvents");window.inlineSlideEnter=k.createEvent("UIEvents");window.inlineSlideExit=k.createEvent("UIEvents");presentationInit.initEvent("presentationInit",false,false);slideshowLoad.initEvent("slideshowLoad",true,false);slideshowUnload.initEvent("slideshowUnload",true,false);collectionLoad.initEvent("collectionLoad",true,false);collectionUnload.initEvent("collectionUnload",true,false);inlineSlideshowLoad.initEvent("inlineSlideshowLoad",true,false);inlineSlideshowUnload.initEvent("inlineSlideshowUnload",true,false);contentLoad.initEvent("contentLoad",true,false);contentUnload.initEvent("contentUnload",true,false);slideEnter.initEvent("slideEnter",true,false);slideExit.initEvent("slideExit",true,false);sectionEnter.initEvent("sectionEnter",true,false);sectionExit.initEvent("sectionExit",true,false);inlineSlideEnter.initEvent("inlineSlideEnter",true,false);inlineSlideExit.initEvent("inlineSlideExit",true,false);window.Presentation=b=(function(){function d(n){var s,u,q,p,t,m,r,o;window.app=this;this.type=n.type||"dynamic";this.orientation=n.orientation||"landscape";this.country=n.country||"en";this.version=n.version||"0.1";this.slides=n.slideshows||{};this.sections=n.collections||{};this.slideshowIds=Object.keys(this.slides);this.collectionIds=Object.keys(this.sections);this.loaded=null;this.slideshows={};this.collections={};if(this.type==="json"){this.getData()}this.getElements();this.getAllSlides();r=this.slideshowIds;for(q=0,t=r.length;q<t;q++){u=r[q];this.register(u,this.slides[u])}o=this.collectionIds;for(p=0,m=o.length;p<m;p++){s=o[p];this.register(s,this.sections[s],"collection")}document.dispatchEvent(presentationInit);return}d.prototype.add=function(m,o,n){n=n||"slideshow";if(n==="slideshow"){this.slideshowIds.push(m)}else{this.collectionIds.push(m)}this.register(m,o,n)};d.prototype.register=function(m,o,n){n=n||"slideshow";if(n==="slideshow"){this.slideshows[m]=new f(m,o)}else{this.collections[m]=new h(m,o)}};d.prototype.load=function(n,o){var m;m=slideshowLoad;o=o||"slideshow";if(this.loaded){this.unLoad()}if(o==="slideshow"){this.slideshow=this.loaded=this.slideshows[n];this.collection=null;this.loaded.onLoad()}else{m=collectionLoad;this.collection=this.loaded=this.collections[n];this.slideshow=null;this.loaded.onLoad();this.setCurrent(this.collection.content[0]);this.insertSections(this.collection.content,this.collection.ele)}this.elements.presentation.setAttribute("class",n);this.insert(this.loaded);this.getSlides();this.loaded.ele.dispatchEvent(m);this.loaded.ele.dispatchEvent(contentLoad);if(o==="collection"){this.slideshow.ele.dispatchEvent(sectionEnter)}this.slideshow.scrollTo(0)};d.prototype.unLoad=function(){var m,n;n=this.loaded.constructor.name;m=n==="Slideshow"?slideshowUnload:collectionUnload;this.loaded.ele.dispatchEvent(m);this.loaded.ele.dispatchEvent(contentUnload);this.loaded.onUnload();this.remove(this.loaded)};d.prototype.insert=function(n,m){m=m||this.elements.slideshows;m.appendChild(n.ele)};d.prototype.insertSections=function(r,n){var p,o,q,m;for(q=0,m=r.length;q<m;q++){p=r[q];o=this.slideshows[p];o.direction="vertical";this.slideshows[p].onLoad();this.insert(this.slideshows[p],this.loaded.ele)}};d.prototype.remove=function(n,m){m=m||this.elements.slideshows;m.removeChild(n.ele)};d.prototype.getData=function(m,o){var n;n=new XMLHttpRequest();n.open("GET",m,false);n.onreadystatechange=i(function(){if(n.readyState!==4){return}if(n.status!==0&&n.status!==200){if(n.status===400){console.log("Could not locate "+m)}else{console.error("app.getData "+m+" HTTP error: "+n.status)}return}return o(JSON.parse(n.responseText))},this);n.send();console.log("Getting JSON data")};d.prototype.getHtml=function(m,n,p){var o;if(n==null){n="content/slides/"}n=n+m+".html";o=new XMLHttpRequest();o.open("GET",n,false);o.onreadystatechange=i(function(){if(o.readyState!==4){return}if(o.status!==0&&o.status!==200){if(o.status===400){console.log("Could not locate "+n)}else{console.error("app.getHtml "+n+" HTTP error: "+o.status)}return}return p(o.responseText)},this);o.send()};d.prototype.getAllSlides=function(){var o,n,q,m,t,s,p,r;this.allSlides=[];this.slide={};t=["onLoad","onUnload","onEnter","onExit"];o=function(u){var y,x,w,v;app.slide[u]={};v=[];for(x=0,w=t.length;x<w;x++){y=t[x];v.push(app.slide[u][y]=function(){})}return v};r=this.slides;for(q in r){n=r[q];for(s=0,p=n.length;s<p;s++){m=n[s];if(l.call(this.allSlides,m)<0){this.allSlides.push(m);o(m)}}}};d.prototype.getElements=function(){this.elements=this.elements||{};this.elements.presentation=document.getElementById("presentation");this.elements.slideshows=document.getElementById("slideshows");this.elements.loader=document.getElementById("loader")};d.prototype.getSlides=function(){var m,o,p,n;this.slideElements={};o=document.querySelectorAll(".slide");for(p=0,n=o.length;p<n;p++){m=o[p];this.slideElements[m.id]=m}};d.prototype.goTo=function(m,p,n){var o,q;o=l.call(this.slideshowIds,m)>=0?"slideshow":"collection";if(o==="slideshow"){if(m!==this.slideshow.id){this.load(m)}if(p){this.slideshow.scrollTo(p)}}else{if(m!==((q=this.collection)!=null?q.id:void 0)){this.load(m,"collection")}if(p&&p!==this.slideshow.id){this.collection.scrollTo(p)}if(n){this.slideshow.scrollTo(n)}}};d.prototype.setCurrent=function(m){this.slideshow=this.slideshows[m]};return d})();window.Slideshow=f=(function(){function d(o,n,m){this.id=o;this.content=n;this.config=m!=null?m:{};this.type="slideshow";this.direction=this.config.direction||"horizontal";this.dimensions=this.config.dimensions||[1024,768];this.current=this.content[0];this.currentIndex=0;this.length=this.content.length;this.markup=""}d.prototype._createElement=function(){var m;m=document.createElement("section");m.setAttribute("id",this.id);m.setAttribute("class","slideshow");this.ele=m};d.prototype._destroyElement=function(){this.ele=null};d.prototype._isValid=function(m){return l.call(this.content,m)>=0};d.prototype._reset=function(){this.direction="horizontal";this.current=this.content[0];this.currentIndex=0;this.length=this.content.length;this.markup=""};d.prototype._scroll=function(p){var o,n,m,q;n=app.slideElements[this.content[p]];o=app.slideElements[this.current];m=0;q=0;if(this.direction==="horizontal"){m=p*-this.slideWidth}else{q=p*-this.slideHeight}if(n!==o){o.dispatchEvent(slideExit);app.slide[this.current].onExit(o)}this.ele.style.cssText+="-webkit-transform:translate3d("+m+"px, "+q+"px, 0px);";this._setCurrent(p);n.dispatchEvent(slideEnter);app.slide[this.current].onEnter(n)};d.prototype._setCurrent=function(n){var m;m=typeof n;if(m==="string"){this.current=n;this.currentIndex=this.getIndex(n)}else{if("number"){this.current=this.content[n];this.currentIndex=n}}};d.prototype._setMeasurements=function(){this.slideWidth=this.dimensions[0];this.slideHeight=this.dimensions[1];if(this.direction==="horizontal"){this.width=this.slideWidth*this.length}else{this.width=this.slideWidth}};d.prototype.get=function(m){if(m){return document.getElementById(m)}else{return document.getElementById(this.current)}};d.prototype.getIndex=function(m){if(m&&this._isValid(m)){return this.content.indexOf(m)}else{return this.content.indexOf(this.current)}};d.prototype.getSlide=function(m,n){var o;if(n==null){n="content/slides/"}n=n+m+".html";o=new XMLHttpRequest();o.open("GET",n,false);o.onreadystatechange=i(function(){if(o.readyState!==4){return}if(o.status!==0&&o.status!==200){if(o.status===400){console.log("Could not locate "+n)}else{console.error("Slideshow.getSlide "+n+" HTTP error: "+o.status)}return}return this.markup+='<div class="slideWrap">'+o.responseText+"</div>"},this);return o.send()};d.prototype.onLoad=function(){var m,p,n,o;this._setMeasurements();this._createElement();o=this.content;for(p=0,n=o.length;p<n;p++){m=o[p];this.getSlide(m)}this.ele.style.cssText="width:"+this.width+"px;-webkit-transform:translate3d(0px, 0px, 0px);";return this.ele.innerHTML=this.markup};d.prototype.onUnload=function(){var m;m=app.slideElements[this.current];m.dispatchEvent(slideExit);app.slide[this.current].onExit(m);this._reset()};d.prototype.next=function(){if(this.currentIndex<this.length-1){this._scroll(this.currentIndex+1)}};d.prototype.previous=function(){if(this.currentIndex>0){this._scroll(this.currentIndex-1)}};d.prototype.scrollTo=function(n){var m;m=typeof n;if(m==="string"){this._scroll(this.getIndex(n))}else{if("number"){this._scroll(Math.abs(n))}}};d.prototype.scrollToEnd=function(){this._scroll(this.length-1)};d.prototype.scrollToStart=function(){this._scroll(0)};return d})();window.Collection=h=(function(){g(d,f);function d(){d.__super__.constructor.apply(this,arguments)}d.prototype._resetSection=function(){var m;m=app.slideshow;return setTimeout(function(){m.ele.style.cssText+="-webkit-transform:translate3d(0px, 0px, 0px);";return m._setCurrent(0)},600)};d.prototype._scroll=function(o){var r,q,p,n,m,s;r=app.slideshows[this.content[o]];n=app.slideshows[this.current];p=app.slideElements[r.content[0]];q=app.slideElements[n.content[0]];m=0;s=0;if(this.direction==="horizontal"){m=o*-this.slideWidth}else{s=o*-this.slideHeight}n.ele.dispatchEvent(sectionExit);q.dispatchEvent(slideExit);app.slide[q.id].onExit(q);this.ele.style.cssText+="-webkit-transform:translate3d("+m+"px, "+s+"px, 0px);";this._resetSection();this._setCurrent(o);app.setCurrent(this.current);r.ele.dispatchEvent(sectionEnter);p.dispatchEvent(slideEnter);return app.slide[p.id].onEnter(p)};d.prototype.onLoad=function(){this.type="collection";this._setMeasurements();this._createElement();this.ele.style.cssText="width:"+this.width+"px;-webkit-transform:translate3d(0px, 0px, 0px);";return this.ele.setAttribute("class","collection")};d.prototype.onUnload=function(){var s,r,q,p,n,o,m;s=app.slideshows[this.current];r=app.slideElements[s.content[0]];r.dispatchEvent(slideExit);app.slide[r.id].onExit(r);s.ele.dispatchEvent(sectionExit);this._reset();o=this.content;m=[];for(p=0,n=o.length;p<n;p++){q=o[p];m.push(app.slideshows[q]._reset())}return m};return d})();window.InlineSlideshow=e=(function(){g(d,f);function d(n,m){this.id=n;this.config=m!=null?m:{};this.type="inline";this.content=app.slideshows[this.id].content;this.direction=this.config.direction||"horizontal";this.dimensions=this.config.dimensions||[1024,768];this.current=this.content[0];this.currentIndex=0;this.length=this.content.length;this.elements={};this.markup=""}d.prototype._createElement=function(){var m;m=document.createElement("section");m.setAttribute("id",this.id);m.setAttribute("class","inline-slideshow");this.ele=m};d.prototype._scroll=function(p){var o,n,m,q;n=app.slideElements[this.content[p]];o=app.slideElements[this.current];m=0;q=0;if(this.direction==="horizontal"){m=p*-this.slideWidth}else{q=p*-this.slideHeight}if(n!==o){o.dispatchEvent(inlineSlideExit);app.slide[this.current].onExit(o)}this.ele.style.cssText+="-webkit-transform:translate3d("+m+"px, "+q+"px, 0px);";this._setCurrent(p);n.dispatchEvent(inlineSlideEnter);app.slide[this.current].onEnter(n)};d.prototype.load=function(m){app.inline=this;this.onLoad();app.insert(this,m);app.getSlides();this.ele.dispatchEvent(inlineSlideshowLoad);app.inline.scrollTo(0)};d.prototype.unLoad=function(){this.ele.dispatchEvent(inlineSlideshowUnload);app.inline=null;this._reset()};return d})();window.Slidescroller=c=(function(){function d(m){this.id=m;this._down=i(this._down,this);this._up=i(this._up,this);this._previous=i(this._previous,this);this._next=i(this._next,this);this.ele=app.elements.presentation;this.type="slideshow";this.actions={left:this._next,right:this._previous,up:this._up,down:this._down};this._connect()}d.prototype._connect=function(){document.addEventListener("contentLoad",i(function(){if(this.id===app.loaded.id){this.ele=document.getElementById(this.id)}return this.type=app.loaded.type},this));this.enableAll()};d.prototype._next=function(m){if(this.type==="slideshow"){this._nextSlide(m)}else{this._nextSection(m)}};d.prototype._previous=function(m){if(this.type==="slideshow"){this._previousSlide(m)}else{this._previousSection(m)}};d.prototype._up=function(m){if(this.type==="collection"){this._nextSlide(m)}};d.prototype._down=function(m){if(this.type==="collection"){this._previousSlide(m)}};d.prototype._addSwipeListener=function(m){this.ele.addEventListener(m,this.events[m])};d.prototype._nextSection=function(m){m.preventDefault();app.collection.next()};d.prototype._nextSlide=function(m){m.preventDefault();app.slideshow.next()};d.prototype._previousSection=function(m){m.preventDefault();app.collection.previous()};d.prototype._previousSlide=function(m){m.preventDefault();app.slideshow.previous()};d.prototype.disable=function(m){this.ele.removeEventListener("swipe"+m,this.actions[m])};d.prototype.disableAll=function(){this.ele.removeEventListener("swipeleft",this._next);this.ele.removeEventListener("swiperight",this._previous);this.ele.removeEventListener("swipeup",this._up);this.ele.removeEventListener("swipedown",this._down)};d.prototype.enable=function(m){this.ele.addEventListener("swipe"+m,this.actions[m])};d.prototype.enableAll=function(){this.ele.addEventListener("swipeleft",this._next);this.ele.addEventListener("swiperight",this._previous);this.ele.addEventListener("swipeup",this._up);this.ele.addEventListener("swipedown",this._down)};return d})();window.MemoryManager=a=(function(){function d(n,m){this.name=n;this.config=m!=null?m:{};this._connect()}d.prototype._connect=function(){document.addEventListener("slideEnter",function(m){return setTimeout(function(){return m.target.setAttribute("class","slide active")},600)});return document.addEventListener("slideExit",function(m){return setTimeout(function(){return m.target.setAttribute("class","slide")},600)})};return d})();window.debug=function(){var n,s,r,q,d,p,o,m;q=null;o=null;d=false;m="";document.addEventListener("presentationInit",function(){console.log("**** Presentation initialized");console.log("Registered slideshows:  "+app.slideshowIds);return console.log("Registered collections: "+app.collectionIds)});document.addEventListener("slideshowLoad",function(){return console.log("**** Slideshow loaded: "+app.slideshow.id)});document.addEventListener("slideshowUnload",function(){return console.log("**** Slideshow unloaded: "+app.slideshow.id)});document.addEventListener("collectionLoad",function(){return console.log("**** Collection loaded: "+app.collection.id)});document.addEventListener("collectionUnload",function(){return console.log("**** Collection unloaded: "+app.collection.id)});document.addEventListener("inlineSlideshowLoad",function(){return console.log("**** Inline slideshow loaded: "+app.inline.id)});document.addEventListener("inlineSlideshowUnload",function(){return console.log("**** Inline slideshow unloaded: "+app.inline.id)});document.addEventListener("contentLoad",function(t){return console.log("**** New content loaded: "+t.target.id)});document.addEventListener("contentUnload",function(t){return console.log("**** Content unloaded: "+t.target.id)});document.addEventListener("slideEnter",function(){return console.log("---> Slide entered: "+app.slideshow.current)});document.addEventListener("slideExit",function(){return console.log("<--- Slide exited: "+app.slideshow.current)});document.addEventListener("sectionEnter",function(){return console.log(">>>> Section entered: "+app.slideshow.id)});document.addEventListener("sectionExit",function(){return console.log("<<<< Section exited: "+app.slideshow.id)});document.addEventListener("inlineSlideEnter",function(){return console.log("---> Inline slide entered: "+app.inline.current)});document.addEventListener("inlineSlideExit",function(){return console.log("<--- Inline slide exited: "+app.inline.current)});s=function(){var u,t,y,w,v,x;q=u=document.createElement("section");y=document.createElement("h3");t=document.createElement("a");w=document.createElement("div");x=document.createElement("div");v=document.createElement("h4");o=document.createElement("div");u.id="debug";y.innerText="Debug Console";w.className="d-col";x.className="d-col last-col";t.innerText="Open API documentation";t.href="../docs/index.html";v.innerText="Log output";w.appendChild(t);x.appendChild(v);x.appendChild(o);u.appendChild(y);u.appendChild(w);u.appendChild(x);return document.body.appendChild(q)};p=function(u){var t;t=document.createElement("p");t.innerText=u;return o.appendChild(t)};n=function(){return o.innerHTML=""};document.addEventListener("longTouch",function(){if(d){q.style.display="none";return d=false}else{q.style.display="block";return d=true}});r=function(t){t="?"+t||"";return window.location.href="file:///Library/WebServer/Documents/Barista/docs/index.html"+t};s();window.doc=r;return window.log=p}}).call(this);